/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '5.1.0'
}

class VersionDetails {
    String version = "1.8.1";
    String dev = "DEV-" + System.getenv("BUILD_NUMBER").toString();
    String release = "Release";
}

ext {
    details = new VersionDetails()
}

group = 'me.clip'
version = "${details.version}-${details.release}".toString()
sourceCompatibility = JavaVersion.VERSION_1_8

repositories {
    mavenCentral()

    maven {
        name = 'spigotmc-repo'
        url = 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/'
    }
    maven {
        name = 'sonatype'
        url = 'https://oss.sonatype.org/content/groups/public/'
    }
    maven {
        url = 'http://repo.extendedclip.com/content/repositories/placeholderapi'
    }
}

shadowJar {
    minimize()
    archiveFileName = "DeluxeTags-${project.version}.jar"
}

dependencies {
    compileOnly 'org.spigotmc:spigot-api:1.12.2-R0.1-SNAPSHOT'
    compileOnly 'me.clip:placeholderapi:2.10.4'
}

sourceSets {
    test.compileClasspath += configurations.compileOnly
    test.runtimeClasspath += configurations.compileOnly
}

compileJava {
    options.compilerArgs += ["-parameters"]
    options.fork = true
    options.forkOptions.executable = 'javac'
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}